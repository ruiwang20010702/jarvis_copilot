# S9 项目 AI 技术分享

> 🎯 **分享时长**：10 分钟  
> 🗓️ **日期**：2025-12-22  
> 👥 **适合听众**：所有人（无需技术背景）

---

## 📌 今天要聊的两件事

| 主题 | 一句话概括 | 时间 |
|------|-----------|------|
| 流式对话 + 工具调用 | AI 怎么做到"边说话边操作界面" | **7 min** |
| Prompt Engineering | 怎么让 AI 乖乖按我们的规则办事 | 3 min |

---

## 🌊 第一部分：流式对话 + 工具调用

### 什么是"流式对话"？

你有没有注意到，和 ChatGPT 聊天时，它的回复是**一个字一个字往外蹦**的，而不是等很久然后突然出现一大段？

这就是**流式响应**。

**传统方式**（非流式）：
> 你问了一个问题 → 等待 5 秒 → 突然出现完整回答

**流式方式**：
> 你问了一个问题 → 0.5秒后开始出字 → 一个字一个字往外冒 → 你边看它边写

**为什么流式体验更好？**
- 用户不会觉得"卡住了"
- 减少焦虑感，像在和真人聊天
- 实际总时间差不多，但**感知速度**快很多

---

### 我们用了哪些 AI 模型？

在这个项目里，我们同时接入了**两家 AI**，它们各有所长：

---

#### 🔥 豆包 Doubao-Seed 1.8 / 1.6-Flash（字节跳动 · 火山方舟）

**官方定位**：字节跳动最新一代大语言模型，专为中文场景优化

**核心能力**：
- **函数调用（Function Calling）**：支持 AI 调用外部工具，实现"边说边做"
- **深度思考**：类似 Gemini 的思考模式，可以让 AI 先想一想再回答
- **流式输出**：支持一字一字往外蹦的实时响应
- **上下文缓存**：长对话场景下更省成本、更快响应

**我们选它的原因**：
- 国内网络环境下**稳定可靠**，不会被墙
- **中文理解能力强**，生成的中文更自然
- 价格实惠，适合高频调用场景

---

#### 💎 Gemini 3 Flash（Google DeepMind）

**官方定位**：
> "Frontier intelligence built for speed at a fraction of the cost"  
> **前沿智能，为速度而生，成本只是一小部分**

这是 Google 最新发布的模型，特点是**既聪明又快**——以前你要么选聪明的（慢），要么选快的（笨），现在 Gemini 3 Flash 两者兼得。

**核心性能数据**（来自官方）：

| 能力 | 表现 |
|------|------|
| PhD级推理（GPQA Diamond） | **90.4%** |
| 多模态理解（MMMU Pro） | **81.2%** |
| 代码能力（SWE-bench） | **78%**（甚至超过 Gemini 3 Pro） |
| 相比上一代 2.5 Pro | **快 3 倍**，思考 Token 减少 30% |

**官方定价**：
- 输入：$0.50 / 百万 Token（非常便宜）
- 输出：$3.00 / 百万 Token

**我们选它的原因**：
- **工具调用能力最强**——它是 Google 官方认证的「Agentic 工作流最强模型」
- **思考模式可调**——简单问题快速回答，复杂问题深度思考
- **多模态理解**——能看懂图片、视频、音频

---

#### 🤔 为什么要接两个 AI？

这就像出门带两把钥匙——一把丢了还有备用。

| 场景 | 我们用谁 |
|------|----------|
| 国内网络、中文对话为主 | 豆包 |
| 需要深度推理、工具调用 | Gemini 3 Flash |
| 任意一个挂了 | 自动切换到另一个 |

用户完全感知不到背后是哪个 AI 在干活，但我们能保证服务**永远在线**。

---

### 什么是"工具调用"（Function Calling）？

想象一下，AI 只是一个"嘴巴"，它只会说话。但我们的产品需要 AI 不仅会说话，还要能**操作界面**。

比如在我们的课堂系统里，AI 导师说"请在文章中找到这个词"，学生端就要**自动弹出一个划线工具**让学生去操作。

这就需要"工具调用"——让 AI 在说话的同时，**触发特定的功能**。

**打个比方**：
> AI 就像一个餐厅的**服务员机器人**🤖
> - 它可以和你聊天（普通对话）
> - 但它也有一排按钮：点餐、结账、叫经理
> - 当它觉得需要的时候，它会一边说"好的，我帮您点餐"，一边按下"点餐"按钮

在技术上，AI 的回复不再只是文字，而是可能包含两部分：
1. **文字内容**："请在文章中找到 traditional robots 这个词"
2. **工具指令**：触发"划线任务"功能，让学生端弹出划线界面

---

### ⚠️ 踩坑分享：豆包的工具调用是"分片"发回来的

这是我们遇到的一个真实问题。

**Gemini** 的工具调用是"整包"发回来的——AI 决定要按某个按钮时，会一次性告诉你"我要按这个按钮，参数是 xxx"。

但**豆包**不一样，它是"分片"发回来的——先告诉你"我要按个按钮"，过一会儿告诉你"按钮名字叫 xxx"，再过一会儿告诉你"参数是 xxx"。

就像有人打电话报地址，Gemini 会说"北京市朝阳区建国路 88 号"，豆包会说"北京市……朝阳区……建国……路……88 号"。

**解决办法**：我们做了一个"缓冲区"，先把碎片收集起来，等收齐了再处理。

---

### 🧠 "思考模式"——让 AI 先想一想再回答

这是两个模型都支持的高级功能。

**普通模式**：AI 马上开始回答，速度快，但有时候思考不够深

**思考模式**：AI 会先"心里想一想"，然后再回答

| 模式 | 速度 | 适合场景 |
|------|------|----------|
| 关闭思考 | 0.5-1秒出结果 | 简单问候、日常对话 |
| 低强度思考 | 2-3秒出结果 | 一般性问题 |
| 高强度思考 | 3-5秒出结果 | 复杂分析、错题讲解 |

**为什么这个功能很重要？**

根据 Google 官方数据，Gemini 3 Flash 在思考模式下：
- 会根据问题复杂程度**自动调节思考深度**
- 简单问题快速回答，复杂问题想久一点
- 相比上一代，平均**少用 30% 的思考 Token**，又快又省钱

在我们的产品里，当 AI 需要分析学生的错题原因时，我们会开启思考模式，让它想得更深一些，给出更准确的归因。

---

### 这部分的核心收获

> 💡 **AI 不只是一个"聊天机器人"**  
> 通过流式 + 工具调用，它可以：
> - 一边说话，一边触发界面功能
> - 像一个真正的助教一样，又能讲，又能操作

---

## 🎯 第二部分：Prompt Engineering（提示词工程）

### 什么是 Prompt？

Prompt 就是你给 AI 的"指令"或"剧本"。

你可以把 AI 想象成一个**超级实习生**：
- 聪明、知识面广、反应快
- 但如果不给明确指令，可能会乱来
- 给的指令越清晰，干活越靠谱

**Prompt Engineering** 就是研究怎么写出好指令，让 AI 乖乖按我们的要求办事。

---

### 🎭 我们的 AI 导师角色设计

在我们的英语阅读教学系统里，AI 扮演一个"苏格拉底式"的导师。

什么是苏格拉底式教学？就是**不直接给答案，而是用提问引导学生自己发现答案**。

**举个例子**：

学生做错了一道阅读理解题。

❌ **普通 AI 的做法**：
> "答案是 C。因为原文第二段说了 xxxxx。"

✅ **苏格拉底式 AI 的做法**：
> "这道题你选了 D 是吧？🤔 来，我们一起看看。题目问的是 'Why'，那你能不能先去原文里找找，哪句话在讲原因呢？"

后者不是直接给答案，而是一步步引导学生自己去找、去想、去发现。

---

### 🔴 我们遇到的最大问题：AI "只说不做"

这是我们踩过的最大的坑。

**问题描述**：
AI 说了"请在文章中画出这个词"，但学生端什么反应都没有——因为 AI 只是**说了这句话**，但没有**真正触发划线功能**。

就好像服务员嘴上说"好的，我帮您点餐"，但其实根本没有去厨房下单。

**为什么会这样？**

AI 是一个语言模型，它默认只会"说话"。如果你不明确告诉它"说完这句话后，你必须按下那个按钮"，它就真的只会说话。

---

### 🛠️ 解决方案：在 Prompt 里立下"铁律"

我们在给 AI 的指令里，写了非常严格的规则：

> **核心原则：没有工具调用 = 学生无法响应 = 教学失败！**

并且给了它一个"关键词触发表"：

| 当 AI 说了这些话 | 必须同时做这件事 |
|-----------------|----------------|
| "请找一找"、"画出来" | 触发划线功能 |
| "你觉得呢？"、问号结尾 | 触发语音回答功能 |
| "选一个答案" | 触发选择题功能 |

这样 AI 就知道：只要我说了"找"、"画"这类词，我就必须同时按下那个"划线"按钮。

---

### 📝 我们还用了"正反例"教学法

就像教小孩一样，光说规则不够，还要举例子。

**我们告诉 AI 什么是错的**：

> 🚫 **错误示例**：  
> AI 说了"请在文章中把它画出来！👇"  
> 但没有触发划线功能  
> → 结果：学生傻眼，不知道怎么操作

**也告诉它什么是对的**：

> ✅ **正确示例**：  
> AI 说："请去文章的第一段找一找 👇"  
> 同时触发划线功能  
> → 结果：学生看到划线工具，可以开始操作

通过这种"正反对比"，AI 就能更好地理解我们的意图。

---

### 🎓 这部分的核心收获

> 💡 **Prompt 是你和 AI 的"契约"**  
> - 你写得越清晰、越详细，AI 表现越好  
> - 光说规则不够，要给**具体例子**  
> - 对于"必须做"的事情，要**反复强调、明确约束**

---

## 🏁 总结

| 主题 | 核心要点 |
|------|----------|
| **流式对话** | 让 AI 的回复"一个字一个字蹦出来"，提升用户体验 |
| **工具调用** | 让 AI 不仅能说话，还能操作界面、触发功能 |
| **思考模式** | 让 AI 在回答复杂问题前先"想一想"，提高质量 |
| **Prompt Engineering** | 通过清晰的规则 + 正反例子，让 AI 按我们的剧本演出 |

---

## 💬 一句话收尾

> **AI 就像一个超级聪明的实习生——你给的指令越清晰、边界越明确，它干活就越靠谱。**

---

*欢迎提问！🙋*
